!function(){const e=document.querySelector("[data-app-all]");if(!e)return;const t=e.querySelector("[data-search]"),a=e.querySelector("[data-category]"),r=e.querySelector("[data-tags]"),n=e.querySelector("[data-sort]"),o=e.querySelector("[data-reset]"),s=e.querySelector("[data-list]"),i=e.querySelector("[data-state]"),c=e.querySelector("[data-empty]"),d=e.querySelector("[data-error]"),l=e.querySelector("[data-count]"),g=e.querySelector("[data-keyword]"),u=e.querySelector("[data-pills]"),p=e.querySelector("[data-recent]"),y=e.querySelector("[data-sentinel]"),m=e.querySelector("[data-detail]"),v=e.querySelector("[data-detail-body]"),S=e.querySelector("[data-detail-close]"),h="filter_all_recent",b=sessionStorage,L=[{id:1,title:"IONIQ 6",category:"ev",tags:["new"],price:62e3,desc:"전기 세단",badges:["New"]},{id:2,title:"Kona Electric",category:"ev",tags:["promo"],price:48e3,desc:"컴팩트 EV",badges:["Promotion"]},{id:3,title:"Palisade",category:"suv",tags:["awd"],price:58e3,desc:"대형 SUV",badges:["AWD"]},{id:4,title:"Sonata",category:"sedan",tags:[],price:41e3,desc:"세단",badges:[]},{id:5,title:"Santa Fe",category:"suv",tags:["awd","promo"],price:54e3,desc:"패밀리 SUV",badges:["Promotion","AWD"]},{id:6,title:"Avante",category:"sedan",tags:["new"],price:32e3,desc:"준중형 세단",badges:["New"]},{id:7,title:"Venue",category:"suv",tags:[],price:29e3,desc:"도심형 SUV",badges:[]},{id:8,title:"IONIQ 5",category:"ev",tags:["promo"],price:55e3,desc:"전기 SUV",badges:["Promotion"]},{id:9,title:"Tucson",category:"suv",tags:["awd"],price:51e3,desc:"SUV",badges:["AWD"]},{id:10,title:"Grandeur",category:"sedan",tags:["promo"],price:45e3,desc:"준대형 세단",badges:["Promotion"]},{id:11,title:"Kona Hybrid",category:"suv",tags:["new"],price:47e3,desc:"하이브리드 SUV",badges:["New"]},{id:12,title:"Nexo",category:"ev",tags:[],price:6e4,desc:"수소 전기차",badges:[]}];let w={keyword:"",category:"all",tags:new Set,sort:"recent",page:1,pageSize:6,loading:!1,error:!1,total:L.length};const q=e=>`₩${e.toLocaleString()}`,f=(t=!0)=>{w.loading=t;const a=e.querySelector(".skeletons");if(t){a&&a.remove();const e=(()=>{const e=document.createDocumentFragment();for(let t=0;t<6;t+=1){const t=document.createElement("div");t.className="skeleton",e.appendChild(t)}const t=document.createElement("div");return t.className="skeletons is-active",t.appendChild(e),t})();e.setAttribute("aria-hidden","true"),s.insertAdjacentElement("beforebegin",e),s.innerHTML=""}else a&&a.remove()},E=()=>{const e=w.keyword.trim().toLowerCase();return L.filter(t=>{const a=!e||t.title.toLowerCase().includes(e)||t.desc.toLowerCase().includes(e),r="all"===w.category||t.category===w.category,n=!w.tags.size||[...w.tags].every(e=>t.tags.some(t=>t.toLowerCase()===e.toLowerCase()));return a&&r&&n})},k=()=>{try{return JSON.parse(b.getItem(h))||[]}catch(e){return[]}},C=()=>{const e=k();p.innerHTML=e.map(e=>`<button type="button" data-recent-key="${e}">${e}</button>`).join("")||'<span class="none">없음</span>'},$=()=>{const e=[],t=w.keyword.trim();t&&e.push({type:"keyword",label:`검색: ${t}`}),"all"!==w.category&&e.push({type:"category",label:`카테고리: ${w.category}`}),w.tags.forEach(t=>e.push({type:"tag",value:t,label:`태그: ${t}`})),u.innerHTML=e.map(e=>`<span class="pill" data-pill="${e.type}" data-value="${e.value||""}">${e.label}<button type="button" aria-label="제거">×</button></span>`).join("")},V=()=>{if(w.loading)return;if(i.textContent="",d.hidden=!w.error,w.error)return;if(!(()=>{const e=w.keyword.trim();return Boolean(e||"all"!==w.category||w.tags.size>0)})())return s.innerHTML="",c.hidden=!0,l.textContent=0,g.textContent="검색 필요",void $();const e=(t=E(),"price-asc"===(a=w.sort)?[...t].sort((e,t)=>e.price-t.price):"price-desc"===a?[...t].sort((e,t)=>t.price-e.price):t);var t,a;w.total=e.length;const r=w.page*w.pageSize,n=e.slice(0,r);s.innerHTML=n.map(e=>`\n      <article class="card" data-id="${e.id}" tabindex="0">\n        <strong>${e.title}</strong>\n        <div class="meta">${e.desc}</div>\n        <div class="meta price">${q(e.price)}</div>\n        <div class="badges">\n          ${e.badges.map(e=>`<span class="badge${"Promotion"===e?" promo":""}${"AWD"===e?" awd":""}">${e}</span>`).join("")}\n        </div>\n      </article>\n    `).join(""),c.hidden=e.length>0,l.textContent=e.length,g.textContent=w.keyword.trim()||"전체",$()},T=((e,t=200)=>{let a;return(...r)=>{clearTimeout(a),a=setTimeout(()=>e(...r),t)}})(e=>{w.keyword=e.trim(),w.page=1,(e=>{if(!e)return;const t=k().filter(t=>t!==e);t.unshift(e),b.setItem(h,JSON.stringify(t.slice(0,6)))})(w.keyword),C(),V()});t.addEventListener("input",e=>T(e.target.value)),a.addEventListener("change",e=>{w.category=e.target.value,w.page=1,V()}),n.addEventListener("change",e=>{w.sort=e.target.value,w.page=1,V()}),r.addEventListener("click",e=>{const t=e.target.closest("button[data-tag]");if(!t)return;const a=t.dataset.tag;w.tags.has(a)?w.tags.delete(a):w.tags.add(a),t.classList.toggle("is-active"),w.page=1,V()}),o.addEventListener("click",()=>{w={...w,keyword:"",category:"all",tags:new Set,sort:"recent",page:1},t.value="",a.value="all",n.value="recent",r.querySelectorAll("button").forEach(e=>e.classList.remove("is-active")),V()}),u.addEventListener("click",e=>{const n=e.target.closest(".pill");if(!n)return;const o=n.dataset.pill,s=n.dataset.value;"keyword"===o&&(w.keyword="",t.value=""),"category"===o&&(w.category="all",a.value="all"),"tag"===o&&(w.tags.delete(s),r.querySelector(`[data-tag="${s}"]`)?.classList.remove("is-active")),w.page=1,V()}),p.addEventListener("click",e=>{const a=e.target.closest("button[data-recent-key]");a&&(w.keyword=a.dataset.recentKey,t.value=w.keyword,w.page=1,V())}),s.addEventListener("click",e=>{const t=e.target.closest(".card");if(!t)return;const a=Number(t.dataset.id),r=L.find(e=>e.id===a);r&&(m.hidden=!1,v.innerHTML=`\n      <h3>${r.title}</h3>\n      <p>${r.desc}</p>\n      <p>${q(r.price)}</p>\n      <p>카테고리: ${r.category}</p>\n      <p>태그: ${r.tags.join(", ")||"없음"}</p>\n    `)}),S.addEventListener("click",()=>{m.hidden=!0}),new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const e=E().length;w.page*w.pageSize<e&&(w.page+=1,V())}})}).observe(y),C(),f(!0),setTimeout(()=>{f(!1),V()},500)}(),function(){const e=document.querySelector("[data-app]");if(!e)return;const t=e.querySelector("[data-search]"),a=e.querySelector("[data-category]"),r=e.querySelector("[data-tags]"),n=e.querySelector("[data-sort]"),o=e.querySelector("[data-more]"),s=e.querySelector("[data-reset]"),i=e.querySelector("[data-list]"),c=e.querySelector("[data-state]"),d=e.querySelector("[data-empty]"),l=e.querySelector("[data-error]"),g=e.querySelector("[data-count]"),u=e.querySelector("[data-keyword]"),p=[{id:1,title:"IONIQ 6",category:"ev",tags:["new"],price:62e3,desc:"전기 세단",badges:["New"]},{id:2,title:"Kona Electric",category:"ev",tags:["promo"],price:48e3,desc:"컴팩트 EV",badges:["Promotion"]},{id:3,title:"Palisade",category:"suv",tags:["awd"],price:58e3,desc:"대형 SUV",badges:[]},{id:4,title:"Sonata",category:"sedan",tags:[],price:41e3,desc:"세단",badges:[]},{id:5,title:"Santa Fe",category:"suv",tags:["awd","promo"],price:54e3,desc:"패밀리 SUV",badges:["Promotion"]},{id:6,title:"Avante",category:"sedan",tags:["new"],price:32e3,desc:"준중형 세단",badges:["New"]}];let y={keyword:"",category:"all",tags:new Set,sort:"recent",page:1,pageSize:4,loading:!1,error:!1};const m=()=>{if(y.loading)return void(c.textContent="로딩중...");if(c.textContent="",l.hidden=!y.error,y.error)return;const e=(t=(()=>{const e=y.keyword.toLowerCase();return p.filter(t=>{const a=!e||t.title.toLowerCase().includes(e)||t.desc.toLowerCase().includes(e),r="all"===y.category||t.category===y.category,n=!y.tags.size||[...y.tags].every(e=>t.tags.includes(e));return a&&r&&n})})(),"price-asc"===(a=y.sort)?[...t].sort((e,t)=>e.price-t.price):"price-desc"===a?[...t].sort((e,t)=>t.price-e.price):t);var t,a;const r=y.page*y.pageSize,n=e.slice(0,r);i.innerHTML=n.map(e=>{return`\n      <article class="card" data-id="${e.id}">\n        <strong>${e.title}</strong>\n        <div class="meta">${e.desc}</div>\n        <div class="meta price">${t=e.price,`₩${t.toLocaleString()}`}</div>\n        <div class="badges">\n          ${e.badges.map(e=>`<span class="badge${"Promotion"===e?" promo":""}${"AWD"===e?" awd":""}">${e}</span>`).join("")}\n        </div>\n      </article>\n    `;var t}).join(""),d.hidden=e.length>0,o.hidden=r>=e.length,g.textContent=e.length,u.textContent=y.keyword||"전체"},v=((e,t=200)=>{let a;return(...r)=>{clearTimeout(a),a=setTimeout(()=>e(...r),t)}})(e=>{y.keyword=e.trim(),y.page=1,m()});t.addEventListener("input",e=>v(e.target.value)),a.addEventListener("change",e=>{y.category=e.target.value,y.page=1,m()}),n.addEventListener("change",e=>{y.sort=e.target.value,y.page=1,m()}),r.addEventListener("click",e=>{const t=e.target.closest("button[data-tag]");if(!t)return;const a=t.dataset.tag;y.tags.has(a)?y.tags.delete(a):y.tags.add(a),t.classList.toggle("is-active"),y.page=1,m()}),o.addEventListener("click",()=>{y.page+=1,m()}),s.addEventListener("click",()=>{y={...y,keyword:"",category:"all",tags:new Set,sort:"recent",page:1},t.value="",a.value="all",n.value="recent",r.querySelectorAll("button").forEach(e=>e.classList.remove("is-active")),m()}),m()}(),function(){const e=document.querySelector("[data-app-sync]");if(!e)return;const t=e.querySelector("[data-search]"),a=e.querySelector("[data-category]"),r=e.querySelector("[data-tags]"),n=e.querySelector("[data-sort]"),o=e.querySelector("[data-prev]"),s=e.querySelector("[data-next]"),i=e.querySelector("[data-reset]"),c=e.querySelector("[data-list]"),d=e.querySelector("[data-state]"),l=e.querySelector("[data-empty]"),g=e.querySelector("[data-error]"),u=e.querySelector("[data-count]"),p=e.querySelector("[data-keyword]"),y=e.querySelector("[data-page]"),m=[{id:1,title:"IONIQ 6",category:"ev",tags:["new"],price:62e3,desc:"전기 세단",badges:["New"]},{id:2,title:"Kona Electric",category:"ev",tags:["promo"],price:48e3,desc:"컴팩트 EV",badges:["Promotion"]},{id:3,title:"Palisade",category:"suv",tags:["awd"],price:58e3,desc:"대형 SUV",badges:[]},{id:4,title:"Sonata",category:"sedan",tags:[],price:41e3,desc:"세단",badges:[]},{id:5,title:"Santa Fe",category:"suv",tags:["awd","promo"],price:54e3,desc:"패밀리 SUV",badges:["Promotion"]},{id:6,title:"Avante",category:"sedan",tags:["new"],price:32e3,desc:"준중형 세단",badges:["New"]},{id:7,title:"Venue",category:"suv",tags:[],price:29e3,desc:"도심형 SUV",badges:[]},{id:8,title:"IONIQ 5",category:"ev",tags:["promo"],price:55e3,desc:"전기 SUV",badges:["Promotion"]}];let v={keyword:"",category:"all",tags:new Set,sort:"recent",page:1,pageSize:4,loading:!1,error:!1};const S=()=>{if(v.loading)return void(d.textContent="로딩중...");if(d.textContent="",g.hidden=!v.error,v.error)return;const e=(t=(()=>{const e=v.keyword.toLowerCase();return m.filter(t=>{const a=!e||t.title.toLowerCase().includes(e)||t.desc.toLowerCase().includes(e),r="all"===v.category||t.category===v.category,n=!v.tags.size||[...v.tags].every(e=>t.tags.includes(e));return a&&r&&n})})(),"price-asc"===(a=v.sort)?[...t].sort((e,t)=>e.price-t.price):"price-desc"===a?[...t].sort((e,t)=>t.price-e.price):t);var t,a;const r=(v.page-1)*v.pageSize,n=r+v.pageSize,i=e.slice(r,n);c.innerHTML=i.map(e=>{return`\n      <article class="card" data-id="${e.id}">\n        <strong>${e.title}</strong>\n        <div class="meta">${e.desc}</div>\n        <div class="meta price">${t=e.price,`₩${t.toLocaleString()}`}</div>\n        <div class="badges">\n          ${e.badges.map(e=>`<span class="badge${"Promotion"===e?" promo":""}${"AWD"===e?" awd":""}">${e}</span>`).join("")}\n        </div>\n      </article>\n    `;var t}).join(""),l.hidden=e.length>0,o.disabled=1===v.page,s.disabled=n>=e.length,y.textContent=v.page,u.textContent=e.length,p.textContent=v.keyword||"전체",(()=>{const e=new URLSearchParams;v.keyword&&e.set("q",v.keyword),"all"!==v.category&&e.set("cat",v.category),v.tags.size&&e.set("tags",[...v.tags].join(",")),"recent"!==v.sort&&e.set("sort",v.sort),v.page>1&&e.set("page",v.page);const t=e.toString();history.replaceState(null,"",t?`?${t}`:location.pathname)})()},h=((e,t=200)=>{let a;return(...r)=>{clearTimeout(a),a=setTimeout(()=>e(...r),t)}})(e=>{v.keyword=e.trim(),v.page=1,S()});t.addEventListener("input",e=>h(e.target.value)),a.addEventListener("change",e=>{v.category=e.target.value,v.page=1,S()}),n.addEventListener("change",e=>{v.sort=e.target.value,v.page=1,S()}),r.addEventListener("click",e=>{const t=e.target.closest("button[data-tag]");if(!t)return;const a=t.dataset.tag;v.tags.has(a)?v.tags.delete(a):v.tags.add(a),t.classList.toggle("is-active"),v.page=1,S()}),o.addEventListener("click",()=>{v.page>1&&(v.page-=1,S())}),s.addEventListener("click",()=>{v.page+=1,S()}),i.addEventListener("click",()=>{v={...v,keyword:"",category:"all",tags:new Set,sort:"recent",page:1},t.value="",a.value="all",n.value="recent",r.querySelectorAll("button").forEach(e=>e.classList.remove("is-active")),S()}),(()=>{const e=new URLSearchParams(location.search);v.keyword=e.get("q")||"",v.category=e.get("cat")||"all";const o=e.get("tags");v.tags=new Set(o?o.split(",").filter(Boolean):[]),v.sort=e.get("sort")||"recent",v.page=Number(e.get("page"))||1,t.value=v.keyword,a.value=v.category,n.value=v.sort,r.querySelectorAll("button[data-tag]").forEach(e=>{e.classList.toggle("is-active",v.tags.has(e.dataset.tag))})})(),S()}(),function(){const e=document.querySelector(".finder");if(!e)return;const t=e.querySelector(".menu-list"),a=e.querySelector("[data-list]"),r=e.querySelector("[data-empty]"),n=e.querySelector(".finder__summary .count"),o=e.querySelector(".finder__summary .keyword"),s=e.querySelector("[data-search]"),i=e.querySelector("[data-search-btn]"),c=e.querySelector(".finder__section--menus .more"),d=e.querySelector(".finder__section--vehicles .more"),l=[{id:1,path:"PBV > PBV Electric Vans Vision"},{id:2,path:"Special PBV > PBV Electric Vans Vision"},{id:3,path:"PBV > PBV Electric Vans Vision"},{id:4,path:"menu02 > PBV Electric Vans Vision"},{id:5,path:"EV > EV 브랜드"}],g=[{id:1,title:"2024 The Sportage",price:"From € 999,999.00 ~ (VAT included)",desc:"Combined Fuel Consumption : 9.4-8.8L / 100Km | Combined CO2 Emissions : 213-201g/Km | CO2 Efficiency : A+",tags:["HEV","HEV"],badges:["New","Promotion"]},{id:2,title:"2024 The Sportage",price:"From € 999,999.00 ~ (VAT included)",desc:"Combined Fuel Consumption : 9.4-8.8L / 100Km | Combined CO2 Emissions : 213-201g/Km | CO2 Efficiency : A+",tags:["HEV","HEV"],badges:["Promotion"]},{id:3,title:"2024 The Sportage",price:"From € 999,999.00 ~ (VAT included)",desc:"Combined Fuel Consumption : 9.4-8.8L / 100Km | Combined CO2 Emissions : 213-201g/Km | CO2 Efficiency : A+",tags:["HEV","HEV"],badges:["New"]},{id:4,title:"EV6 GT Line",price:"From € 89,000.00 ~ (VAT included)",desc:"Combined Fuel Consumption : 0L / 100Km | Combined CO2 Emissions : 0g/Km | CO2 Efficiency : A+",tags:["EV","AWD"],badges:["Promotion"]}];let u={keyword:"",menuLimit:4,vehicleLimit:3};const p=e=>`<span class="badge${"Promotion"===e?" badge--green":""}">${e}</span>`,y=()=>{const{menuFiltered:e,vehicleFiltered:s}=(()=>{const e=u.keyword.toLowerCase();return{menuFiltered:l.filter(t=>!e||t.path.toLowerCase().includes(e)),vehicleFiltered:g.filter(t=>!e||t.title.toLowerCase().includes(e)||t.desc.toLowerCase().includes(e)||t.tags.some(t=>t.toLowerCase().includes(e)))}})();(e=>{const a=e.slice(0,u.menuLimit);t.innerHTML=a.map(e=>`\n        <div class="menu-card">\n          <span class="path">${e.path}</span>\n          <span class="arrow">›</span>\n        </div>\n      `).join(""),c&&(c.hidden=e.length<=u.menuLimit,c.textContent=`More (${Math.max(e.length-u.menuLimit,0)})`)})(e),(e=>{const t=e.slice(0,u.vehicleLimit);a.innerHTML=t.map(e=>`\n      <article class="card">\n        ${e.badges?.length?`<div class="badges">${e.badges.map(p).join("")}</div>`:""}\n        <strong>${e.title}</strong>\n        <div class="meta price">${e.price}</div>\n        <div class="meta">${e.desc}</div>\n        <div class="tags">${e.tags.map(e=>`<span>${e}</span>`).join("")}</div>\n      </article>\n    `).join(""),r.hidden=e.length>0,d&&(d.hidden=e.length<=u.vehicleLimit,d.textContent=`More (${Math.max(e.length-u.vehicleLimit,0)})`)})(s),((e,t)=>{const a=e+t;n.textContent=a,o.textContent=u.keyword||"전체"})(e.length,s.length)},m=()=>{u.keyword=s.value.trim(),u.menuLimit=4,u.vehicleLimit=3,y()};s.addEventListener("input",m),i.addEventListener("click",m),c&&c.addEventListener("click",()=>{u.menuLimit+=4,y()}),d&&d.addEventListener("click",()=>{u.vehicleLimit+=3,y()}),y()}(),function(){const e=document.querySelector("[data-gnb]");if(!e)return;const t=e.querySelector(".gnb__toggle"),a=e.querySelector(".gnb__list");t.addEventListener("click",()=>{const r=a.hidden;a.hidden=!r,t.setAttribute("aria-expanded",r),e.classList.toggle("is-active",r)})}(),function(){const e=document.querySelector("[data-cards]");e&&(e.innerHTML=[{title:"Alpha"},{title:"Beta"},{title:"Gamma"}].map(e=>`<li class="card">${e.title}</li>`).join(""))}(),function(){const e=document.querySelector("[data-tabs]"),t=document.querySelector("[data-cards-tab]");if(!e||!t)return;const a=[{title:"가이드 A",type:"guide"},{title:"샘플 B",type:"sample"},{title:"가이드 C",type:"guide"}];let r={tab:"all"};const n=()=>{t.innerHTML=a.filter(e=>"all"===r.tab||e.type===r.tab).map(e=>`<li class="card">${e.title}</li>`).join("")};e.addEventListener("click",t=>{const a=t.target.closest("[data-tab]");a&&(r.tab=a.dataset.tab,[...e.children].forEach(e=>e.classList.toggle("is-active",e===a)),n())}),n()}(),function(){const e=document.querySelector("[data-form]");if(!e)return;const t=e.querySelector("[data-msg]"),a=e=>e.validity.valueMissing?"이메일을 입력하세요":e.validity.typeMismatch?"형식이 아닙니다":"";e.addEventListener("input",e=>{if("email"!==e.target.name)return;const r=a(e.target);t.textContent=r,e.target.classList.toggle("is-error",!!r)}),e.addEventListener("submit",t=>{a(e.email)&&t.preventDefault()})}(),function(){const e=document.querySelector("[data-state]"),t=document.querySelector("[data-fetch-list]"),a=document.querySelector("[data-fetch-empty]"),r=document.querySelector("[data-fetch-error]");e&&t&&(async()=>{e.textContent="로딩중...";try{await new Promise(e=>setTimeout(e,300));const r=[{title:"공지 1"},{title:"공지 2"}];n=r,t.innerHTML=n.map(e=>`<li class="card">${e.title}</li>`).join(""),a.hidden=n.length>0,e.textContent=r.length?"":"없음"}catch(a){t.innerHTML="",r.hidden=!1,e.textContent="오류"}var n})()}(),function(){const e=document.querySelector("[data-modal]"),t=document.querySelector("[data-open]");if(!e||!t)return;const a=e.querySelectorAll("[data-close], .backdrop"),r=t=>{e.hidden=!t};t.addEventListener("click",()=>r(!0)),a.forEach(e=>e.addEventListener("click",()=>r(!1)))}();